!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Urpflanze=t():e.Urpflanze=t()}(window,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=33)}([function(e,t,r){"use strict";var i=r(1);const n=new Array(4),s=(e,t)=>e[0]*t[0]+e[1]*t[1],a=e=>Math.hypot(e[0],e[1]),o=(e,t,r)=>{const i=e[0]-r[0],n=e[1]-r[1];e[0]=i*t[0]+n*t[1]+r[0],e[1]=i*t[2]+n*t[3]+r[1]},c=Array.from([0,0]),h=Array.from([1,1]);t.a={create:(e=0,t)=>{const r=new Array(2);return"number"==typeof e?(r[0]=e,r[1]=null!=t?t:e):(r[0]=e[0],r[1]=e[1]),r},distance:(e,t)=>Math.hypot(t[0]-e[0],t[1]-e[1]),dot:s,length:a,angle:(e,t)=>{const r=a(e)*a(t);return Math.acos(Object(i.b)(-1,1,r&&s(e,t)/r))},squeezeX:(e,t)=>{e[1]+=e[1]*(e[0]*-t)},squeezeY:(e,t)=>{e[0]+=e[0]*(e[1]*t)},skewX:(e,t)=>{e[0]+=Math.tan(t)*e[1]},skewY:(e,t)=>{e[1]+=Math.tan(t)*e[0]},rotateX:(e,t,r)=>{n[0]=1,n[1]=0,n[2]=0,n[3]=Math.cos(r),o(e,n,t)},rotateY:(e,t,r)=>{n[0]=Math.cos(r),n[1]=0,n[2]=0,n[3]=1,o(e,n,t)},rotateZ:(e,t,r)=>{n[0]=Math.cos(r),n[1]=-Math.sin(r),n[2]=Math.sin(r),n[3]=Math.cos(r),o(e,n,t)},translate:(e,t)=>{e[0]+=t[0],e[1]+=t[1]},scale:(e,t)=>{e[0]*=t[0],e[1]*=t[1]},divide:(e,t)=>{e[0]/=t[0],e[1]/=t[1]},toString:e=>`x: ${e[0]}, y: ${e[1]}`,ZERO:c,ONE:h}},function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return a})),r.d(t,"h",(function(){return o})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return h})),r.d(t,"e",(function(){return l}));const i=e=>null!=e,n=()=>performance&&performance.now?performance.now():Date.now(),s=(...e)=>{for(let t=0;t<e.length;t++)if(i(e[t]))return e[t]},a=e=>180*e/Math.PI,o=e=>e*Math.PI/180,c=e=>Array.isArray(e)?e:[e,e],h=(e,t,r)=>r<=e?e:r>=t?t:r,l=(e,t,r,i,n)=>h(i,n,(e-t)/(r-t)*(n-i)+i)},function(e,t,r){"use strict";var i;r.d(t,"a",(function(){return i})),function(e){e[e.None=0]="None",e[e.Scale=2]="Scale",e[e.Center=4]="Center",e[e.Fill=8]="Fill"}(i||(i={}))},function(e,t,r){"use strict";var i=r(4),n=r(2),s=r(6),a=r(9),o=r(0),c=r(7);class h extends s.a{constructor(e={},t=!1){e.type=e.type||"ShapeLoop",super(e),this.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat("bAdaptBuffer"),this.props.loop=e.loop,t||(this.loop={start:0,end:h.PI2,inc:h.PI2/30,vertex:()=>o.a.ZERO},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed())}isStaticLoop(){if(this.shapeLoopPropsDependencies.indexOf("vertexCallback")>=0&&"function"==typeof this.vertexCallback)return!1;if(this.shapeLoopPropsDependencies.indexOf("prop_arguments")>=0)return!1;for(let e=0,t=this.shapeLoopPropsDependencies.length;e<t;e++)if("function"==typeof this.props[this.shapeLoopPropsDependencies[e]])return!1;return!0}isStatic(){return this.bStaticLoop&&super.isStatic()}isStaticIndexed(){return this.bStaticLoop&&super.isStaticIndexed()}clearBuffer(e=!1,t=!0){super.clearBuffer(e,t),this.bStaticLoop=this.isStaticLoop(),e&&(this.loop_buffer=void 0)}setProp(e,t){let r=!1;e="string"==typeof e?{[e]:t}:e;for(let t=this.shapeLoopPropsDependencies.length-1;t>=0;t--)if(this.shapeLoopPropsDependencies[t]in e){r=!0;break}"loop"in e&&(e.loop=Object.assign(Object.assign({},this.props.loop),e.loop),r=!0),super.setProp(e,t,r)}getProp(e,t,r){return super.getProp(e,t,r)}getBufferLength(e){if(this.bStatic&&this.buffer&&this.buffer.length>0)return this.buffer.length;if(this.bStaticLoop&&this.loop_buffer&&this.loop_buffer.length>0)return this.loop_buffer.length*this.getRepetitionCount();const{repetition:t}=this.getLoop(e);return this.getRepetitionCount()*t*2}generateBuffer(e,t){return this.bindSideLength(t),this.bStaticLoop?(void 0===this.loop_buffer&&(this.loop_buffer=this.generateLoopBuffer(t)),this.loop_buffer):this.generateLoopBuffer(t)}generateLoopBuffer(e){const{start:t,end:r,inc:a,repetition:o}=this.getLoop(e),h=this.props.loop&&this.props.loop.vertex?this.props.loop.vertex:this.loop.vertex,l={current_index:1,current_offset:0,current_angle:0,current_col:1,current_row:1,current_col_offset:0,current_row_offset:0,type:i.a.Loop,count:o,count_col:1,count_row:1},u=l.count;e.shape_loop=l;const p=new Float32Array(2*u);for(let i=0,n=0;i<u;i++,n+=2){const s=t+a*i;l.current_angle=s>=r?r:s,l.current_index=i+1,l.current_offset=l.current_index/l.count;const o=Float32Array.from(h.call(c.a,l.current_angle,e));this.vertexCallback&&this.vertexCallback.call(c.a,o,e,i,u),p[n]=o[0],p[n+1]=o[1]}return this.bAdaptBuffer!=n.a.None?s.a.adaptBuffer(p,this.bAdaptBuffer):p}getLoop(e=a.a.EMPTY_PROP_ARGUMENTS){var t,r,i,n,s,o;e.time=this.scene?this.scene.current_time:1;let c=null!==(r=null===(t=this.props.loop)||void 0===t?void 0:t.start)&&void 0!==r?r:this.loop.start,h=null!==(n=null===(i=this.props.loop)||void 0===i?void 0:i.end)&&void 0!==n?n:this.loop.end,l=null!==(o=null===(s=this.props.loop)||void 0===s?void 0:s.inc)&&void 0!==o?o:this.loop.inc;c="function"==typeof c?c(e):c,h="function"==typeof h?h(e):h,l="function"==typeof l?l(e):l;const u=Math.ceil((h-c)/l);return{start:c,end:h,inc:l,repetition:u<0?0:u}}setShape(e){this.setProp("loop",e)}}h.PI2=2*Math.PI,h.PId2=Math.PI/2,h.EMPTY_PROP_ARGUMENTS={time:1,context:c.a,repetition:a.a.getEmptyRepetition(),shape_loop:{type:i.a.Loop,current_index:0,current_offset:0,current_angle:0,current_row:0,current_col:0,current_col_offset:0,current_row_offset:0,count:0,count_col:0,count_row:0}},t.a=h},function(e,t,r){"use strict";var i;r.d(t,"a",(function(){return i})),function(e){e[e.Ring=1]="Ring",e[e.Matrix=2]="Matrix",e[e.Loop=3]="Loop"}(i||(i={}))},function(e,t,r){"use strict";var i=r(11),n=r(9),s=r(12);class a extends i.a{constructor(e={}){e.type="Group",super(e),this.children=[],["id","name","order","type"].forEach(t=>{t in e&&delete e[t]}),this.props=e}isStatic(){const e=this.children;for(let t=0,r=e.length;t<r;t++)if(!e[t].isStatic())return!1;return!0}isStaticIndexed(){const e=this.children;for(let t=0,r=e.length;t<r;t++)if(!e[t].isStaticIndexed())return!1;return!0}add(e){e.setProp(this.props),e.order=void 0!==e.order?e.order:this.children.length>0?Math.max.apply(this,this.children.map(e=>e.order||0))+1:0,this.scene&&s.a.propagateToChilden(e,this.scene),this.children.push(e),this.sortChildren()}sortChildren(){this.children.sort((e,t)=>e.order-t.order),this.children=this.children.map((e,t)=>(e.order=t,e)),this.clearBuffer(!0)}getChildren(){return this.children}find(e){if(this.id===e||this.name===e)return this;const t=this.getChildren();for(let r=0,i=t.length;r<i;r++){const i=t[r].find(e);if(null!==i)return i}return null}get(e){return e>=0&&e<this.children.length?this.children[e]:null}remove(e){if(e>=0&&e<this.children.length){const t=this.children.splice(e,1);return this.clearBuffer(!0),t}return!1}removeFromId(e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].id==e)return this.children.splice(t,1),this.clearBuffer(!0)}generate(e,t=!1,r){this.children.forEach(i=>i.generate(e,t,r))}clearBuffer(e=!1,t=!0){if(this.children.forEach(t=>t.clearBuffer(e,!1)),this.scene&&t){const r=this.scene.getParentsOfSceneChild(this);r.length>0&&r[r.length-1].clearBuffer(e,t)}}setProp(e,t){"object"==typeof e?Object.keys(e).forEach(t=>this.props[t]=e[t]):this.props[e]=t,this.children.forEach(r=>r.setProp(e,t))}getBufferLength(e){return this.children.map(t=>t.getBufferLength(e)).reduce((e,t)=>e+t,0)}getBuffer(){const e=this.children.map(e=>e.getBuffer()).filter(e=>void 0!==e),t=e.reduce((e,t)=>e+t.length,0);if(t>0){const r=new Float32Array(t);r.set(e[0],0);for(let t=1,i=0,n=e.length;t<n;t++)i+=e[t-1].length,r.set(e[t],i);return r}return n.a.EMPTY_BUFFER}getIndexedBuffer(){const e=this.children.map(e=>e.getIndexedBuffer()).filter(e=>void 0!==e);return[].concat.apply(null,e)}stream(e){this.children.forEach(t=>t.stream(e))}index(e,t){for(let r=0,i=this.children.length;r<i;r++)this.children[r].index(e,t)}static propagateProp(e,t,r){e.setProp(t,r)}static removeIntersected(e,t){const r=e.getProps(),i=t.getProps(),n=Object.keys(r),s=Object.keys(i),a={};return n.forEach(e=>{s.indexOf(e)>=0&&(a[e]=r[e])}),a}}t.a=a},function(e,t,r){"use strict";var i=r(9),n=r(2),s=r(1),a=r(0);class o extends i.a{constructor(e={}){var t,r;super(e),this.props.sideLength=Object(s.a)(e.sideLength,[50,50]),this.sideLength=a.a.create(Object(s.a)(e.sideLength,[50,50])),this.props.fillColor=e.fillColor,this.props.lineWidth=e.lineWidth,this.props.strokeColor=e.strokeColor,this.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:n.a.None,this.bCloseShape=null===(r=e.bCloseShape)||void 0===r||r,this.vertexCallback=e.vertexCallback}isStatic(){return"function"!=typeof this.props.sideLength&&super.isStatic()}getProp(e,t,r){return super.getProp(e,t,r)}bindSideLength(e){this.sideLength=a.a.create(this.getProp("sideLength",e,[50,50]))}applyVertexTransform(e){e[0]*=this.sideLength[0],e[1]*=this.sideLength[1]}isClosed(){return this.bCloseShape}setClosed(e){this.bCloseShape=e}isAdapted(){return this.bAdaptBuffer}setAdapted(e){this.bAdaptBuffer=e,this.clearBuffer(!0)}addIndex(e,t,r,i){const n={shape:this,buffer_length:t,parent:i,repetition:r};e.push(n)}static getBounding(e){let t=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MIN_VALUE;for(let s=0,a=e.length;s<a;s+=2){const a=e[s],o=e[s+1];a>i?i=a:a<t&&(t=a),o>n?n=o:o<r&&(r=o)}return{x:t,y:r,cx:(t+i)/2,cy:(r+n)/2,width:i-t,height:n-r}}static adaptBuffer(e,t){if(t==n.a.None)return e;const r=new Float32Array(e.length),i=o.getBounding(e);let s=i.width>2||i.height>2||t>=n.a.Fill&&(i.width<2||i.height<2)?2/Math.max(i.width,i.height):1,a=t>=n.a.Center?i.cx:0,c=t>=n.a.Center?i.cy:0;for(let t=0,i=e.length;t<i;t+=2)r[t]=(e[t]-a)*s,r[t+1]=(e[t+1]-c)*s;return r}}t.a=o},function(e,t,r){"use strict";var i=r(29),n=r.n(i),s=r(0),a=r(4);const o={random:new n.a(Math.random)};t.a={noise:function(e="random",t=0,r=0,i=0){return o[e]||(o[e]=new n.a(e)),o[e].noise3D(t,r,i)},angle:function(e,t=[0,0]){var r;if(e.type==a.a.Matrix){const r=s.a.create(t),i=s.a.create((e.count_col-1)/2,(e.count_row-1)/2);return i[0]+=i[0]*r[0],i[1]+=i[1]*r[1],Math.atan((e.current_row-1-i[1])/(e.current_col-1-i[0]))}return null!==(r=e.current_angle)&&void 0!==r?r:0},distance:function(e,t=[0,0],r=[1,1]){if(e.type==a.a.Matrix){const i=s.a.create(t),n=s.a.create(r),a=s.a.create((e.count_col-1)/2,(e.count_row-1)/2);a[0]+=a[0]*i[0],a[1]+=a[1]*i[1];const o=s.a.create(e.current_col-1,e.current_row-1);return s.a.divide(o,n),s.a.distance(o,a)}return 1},percW:function(e,t){return t&&t.scene?t.scene.width*e/100:e},percH:function(e,t){return t&&t.scene?t.scene.height*e/100:e}}},function(e,t,r){"use strict";var i=r(6),n=r(2),s=r(7);class a extends i.a{constructor(e={}){e.type=e.type||"ShapeBuffer",e.bAdaptBuffer=e.bAdaptBuffer||n.a.Scale,super(e),this.shape=e.shape instanceof Float32Array?e.shape:a.EMPTY_BUFFER,this.shape_buffer=this.isAdapted()!=n.a.None?i.a.adaptBuffer(this.shape,this.isAdapted()):this.shape,this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}clearBuffer(e=!1,t=!0){super.clearBuffer(e,t),this.shape_buffer=this.isAdapted()!=n.a.None?i.a.adaptBuffer(this.shape,this.isAdapted()):this.shape}getBufferLength(){return this.buffer&&this.buffer.length>0?this.buffer.length:this.shape_buffer.length*this.getRepetitionCount()}generateBuffer(e,t){if(this.bindSideLength(t),this.vertexCallback){const e=this.shape_buffer.length,r=e/2,i=Float32Array.from(this.shape_buffer);for(let n=0,a=0;n<e;n+=2,a++){const e=[i[n],i[n+1]];this.vertexCallback.call(s.a,e,t,a,r),i[n]=e[0],i[n+1]=e[1]}return i}return this.shape_buffer}setShape(e){this.shape=e,this.clearBuffer(!0)}subdivide(e=1){let t=this.shape;if(t)for(let r=0;r<e;r++)t=a.subdivide(t);t&&this.setShape(t)}static subdivide(e){if(e&&e.length){const t=e.length,r=new Float32Array(2*t);for(let i=0;i<t;i+=2){if(0===i)r[0]=e[0],r[1]=e[1];else{const t=e[i-2],n=e[i-1],s=e[i],a=e[i+1],o=(s+t)/2,c=(a+n)/2;r[2*(i-1)]=o,r[2*(i-1)+1]=c,r[2*i]=s,r[2*i+1]=a}r[2*(t-1)]=(e[0]+e[t-2])/2,r[2*(t-1)+1]=(e[1]+e[t-1])/2}return r}}}t.a=a},function(e,t,r){"use strict";var i=r(4),n=r(11),s=r(0),a=r(7);class o extends n.a{constructor(e={}){super(e),this.generate_id=-1,this.props={distance:e.distance,repetitions:e.repetitions,rotateX:e.rotateX,rotateY:e.rotateY,rotateZ:e.rotateZ,skewX:e.skewX,skewY:e.skewY,squeezeX:e.squeezeX,squeezeY:e.squeezeY,displace:e.displace,translate:e.translate,scale:e.scale,rotationOrigin:e.rotationOrigin},this.bUseParent=!!e.bUseParent}isStatic(){const e=this.props;return"function"!=typeof e.distance&&"function"!=typeof e.repetitions&&"function"!=typeof e.rotateX&&"function"!=typeof e.rotateY&&"function"!=typeof e.rotateZ&&"function"!=typeof e.displace&&"function"!=typeof e.skewX&&"function"!=typeof e.skewY&&"function"!=typeof e.squeezeX&&"function"!=typeof e.squeezeY&&"function"!=typeof e.translate&&"function"!=typeof e.scale&&"function"!=typeof e.rotationOrigin}isStaticIndexed(){return"function"!=typeof this.props.repetitions}getProp(e,t,r){let i=this.props[e];return"function"==typeof i&&(void 0===(t=t||o.EMPTY_PROP_ARGUMENTS).shape&&(t.shape=this),void 0===t.context&&(t.context=a.a),this.scene&&(t.time=this.scene.current_time),i=i(t)),void 0===i||Number.isNaN(i)?r:i}setProp(e,t,r=!1){"string"==typeof e?(r=r||"repetitions"==e,this.props[e]=t):(r=r||"repetitions"in e,Object.keys(e).forEach(t=>this.props[t]=e[t])),this.clearBuffer(r)}clearBuffer(e=!1,t=!0){if(this.buffer=void 0,e&&(this.indexed_buffer=void 0),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed(),t&&this.scene&&!this.scene.isFirstLevelChild(this)){const r=this.scene.getParentsOfSceneChild(this);r.length>0&&r[r.length-1].clearBuffer(e,t)}}generate(e,t=!1,r){var n,c;if(!this.scene||this.buffer&&(this.bStatic||e===this.generate_id&&!this.bUseParent))return;this.generate_id=e;const h=o.getEmptyRepetition(),l=this.getProp("repetitions",{parent:r,repetition:h,time:1,context:a.a},1),u=Array.isArray(l)?i.a.Matrix:i.a.Ring,p=Array.isArray(l)?l[0]*(null!==(n=l[1])&&void 0!==n?n:l[0]):l,f=Array.isArray(l)?l[0]:p,d=Array.isArray(l)?null!==(c=l[1])&&void 0!==c?c:l[0]:1;h.count=p,h.count_col=f,h.count_row=d,h.type=u;const g={repetition:h,context:a.a,time:this.scene?this.scene.current_time:1,shape:this,data:this.data,parent:r};this.single_repetition_buffer_length=new Uint16Array(p);let m=0;const b=[];let _=0;const v=s.a.create((f-1)/2,(d-1)/2);for(let r=0;r<d;r++)for(let n=0;n<f;n++,_++){h.current_index=_+1,h.current_offset=h.current_index/h.count,h.current_angle=u==i.a.Ring?2*Math.PI/p*_:0,h.current_col=n+1,h.current_col_offset=h.current_col/h.count_col,h.current_row=r+1,h.current_row_offset=h.current_row/h.count_row;const a=s.a.create(this.getProp("distance",g,s.a.ZERO)),o=this.getProp("displace",g,0),c=s.a.create(this.getProp("scale",g,s.a.ONE)),l=s.a.create(this.getProp("translate",g,s.a.ZERO)),f=this.getProp("skewX",g,0),d=this.getProp("skewY",g,0),y=this.getProp("squeezeX",g,0),S=this.getProp("squeezeY",g,0),x=this.getProp("rotateX",g,0),w=this.getProp("rotateY",g,0),P=this.getProp("rotateZ",g,0),M=s.a.create(this.getProp("rotationOrigin",g,s.a.ZERO)),A=this.generateBuffer(e,g),C=A.length;let O;switch(b[_]=new Float32Array(C),this.single_repetition_buffer_length[_]=C,m+=C,u){case i.a.Ring:O=s.a.create(a[0],0),s.a.rotateZ(O,s.a.ZERO,h.current_angle+o);break;case i.a.Matrix:O=s.a.create(a[0]*(n-v[0]),a[1]*(r-v[1]))}for(let e=0;e<C;e+=2){const r=s.a.create(A[e],A[e+1]);this.applyVertexTransform(r),0!==y&&s.a.squeezeX(r,y),0!==S&&s.a.squeezeY(r,S),0!==x&&s.a.rotateX(r,M,x),0!==w&&s.a.rotateY(r,M,w),0!==P&&s.a.rotateZ(r,M,P),0!==f&&s.a.skewX(r,f),0!==d&&s.a.skewY(r,d),(1!=c[0]||1!=c[1])&&s.a.scale(r,c),(0!=l[0]||0!=l[1])&&s.a.translate(r,l),u===i.a.Ring&&s.a.rotateZ(r,s.a.ZERO,h.current_angle+o),s.a.translate(r,O),t&&(r[0]+=this.scene.center[0],r[1]+=this.scene.center[1]),b[_][e]=r[0],b[_][e+1]=r[1]}}this.buffer=new Float32Array(m);for(let e=0,t=0,r=b.length;e<r;t+=b[e].length,e++)this.buffer.set(b[e],t);!t||this.indexed_buffer&&this.bStaticIndexed||this.index(this.indexed_buffer=[])}applyVertexTransform(e){}getRepetitionCount(){var e;let t=this.getProp("repetitions",void 0,1);return Array.isArray(t)?t[0]*(null!==(e=t[1])&&void 0!==e?e:t[0]):t}getBuffer(){return this.buffer}getIndexedBuffer(){return this.indexed_buffer}getSingleRepetitionBufferLength(){return this.single_repetition_buffer_length}stream(e){if(this.scene&&this.buffer&&this.indexed_buffer)for(let t=0,r=0,i=this.indexed_buffer.length;t<i;t++){const n=this.indexed_buffer[t],s={shape:n.shape,repetition:n.repetition,context:a.a,time:0,parent:n.parent,data:n.shape.data},o=n.shape.getProp("fillColor",s),c=n.shape.getProp("lineWidth",s,o?void 0:1),h=n.shape.getProp("strokeColor",s,o?void 0:this.scene.mainColor);e({shape:n.shape,repetition:n.repetition,buffer:this.buffer,buffer_length:n.buffer_length,current_buffer_index:r,current_shape_index:t,total_shapes:i,lineWidth:c,strokeColor:h,fillColor:o}),r+=n.buffer_length}}index(e,t){var r,n;if(this.getBuffer()){const s=this.getProp("repetitions",{parent:t,time:1,repetition:o.getEmptyRepetition(),context:a.a},1),c=Array.isArray(s)?i.a.Matrix:i.a.Ring,h=Array.isArray(s)?s[0]*(null!==(r=s[1])&&void 0!==r?r:s[0]):s,l=Array.isArray(s)?s[0]:h,u=Array.isArray(s)?null!==(n=s[1])&&void 0!==n?n:s[0]:1;let p=0;for(let r=0;r<u;r++)for(let n=0;n<l;n++,p++){const s={current_index:p+1,current_offset:(p+1)/h,current_angle:c==i.a.Ring?2*Math.PI/h*p:0,count:h,count_col:l,count_row:u,current_col:n+1,current_col_offset:(n+1)/l,current_row:r+1,current_row_offset:(r+1)/u,type:c};this.addIndex(e,this.single_repetition_buffer_length[p],s,t)}}}}o.EMPTY_BUFFER=new Float32Array(0),o.getEmptyRepetition=()=>({current_index:1,current_offset:0,current_angle:0,current_col:1,current_row:1,current_col_offset:0,current_row_offset:0,type:i.a.Ring,count:1,count_col:1,count_row:1}),o.EMPTY_PROP_ARGUMENTS={time:1,context:a.a,repetition:o.getEmptyRepetition()},t.a=o},function(e,t,r){"use strict";var i=r(9),n=r(11),s=r(12);class a extends i.a{constructor(e={}){e.type=e.type||"Shape",super(e),e.shape instanceof n.a&&(this.shape=e.shape),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}isStatic(){return super.isStatic()&&(!this.shape||this.shape.isStatic())}isStaticIndexed(){return super.isStaticIndexed()&&(!this.shape||this.shape.isStaticIndexed())}find(e){return this.id===e||this.name===e?this:this.shape?this.shape.find(e):null}getBufferLength(e){if(this.bStatic&&this.buffer&&this.buffer.length>0)return this.buffer.length;return(this.shape?this.shape.getBufferLength(e):0)*this.getRepetitionCount()}generateBuffer(e,t){return this.shape?(this.shape.generate(e,!1,t),this.shape.getBuffer()||a.EMPTY_BUFFER):a.EMPTY_BUFFER}setShape(e){void 0===e?(this.shape=void 0,this.clearBuffer(!0)):(this.scene&&s.a.propagateToChilden(e,this.scene),this.shape=e,this.shape.clearBuffer(!0))}addIndex(e,t,r,i){if(this.shape){const n={shape:this,buffer_length:t,parent:i,repetition:r};this.shape.index(e,n)}}}t.a=a},function(e,t,r){"use strict";let i=0;t.a=class{constructor(e){var t;this.id=null!==(t=e.id)&&void 0!==t?t:++i,this.type=e.type||"SceneChild",this.name=e.name||this.type+"_"+this.id,this.data=e.data||{},this.props={}}find(e){return this.id===e||this.name===e?this:null}getProps(){return this.props}getProp(e,t,r){var i;return null!==(i=this.props[e])&&void 0!==i?i:r}setPropUnsafe(e,t){"string"==typeof e?this.props[e]=t:Object.keys(e).forEach(t=>this.props[t]=e[t])}}},function(e,t,r){"use strict";var i=r(1),n=r(11),s=r(5),a=r(10),o=r(0);class c{constructor(e={}){this.start_time=0,this.last_update_time=0,this.current_time=0,this.delta_time=0,this.fps=0,this.width=Object(i.a)(e.width,400),this.height=Object(i.a)(e.height,400),this.background=Object(i.a)(e.background,"#fff"),this.mainColor=Object(i.a)(e.mainColor,"#000"),this.children=[],this.center=o.a.create(this.width/2,this.height/2)}resize(e,t=e){this.width=e,this.height=t,this.center=o.a.create(this.width/2,this.height/2),this.children.forEach(e=>e.clearBuffer())}update(e){if(null==e){this.start_time||(this.start_time=Object(i.d)());const e=Object(i.d)();this.current_time=e-this.start_time}else this.current_time=e;this.children.forEach(e=>e.generate(this.current_time,!0))}clearAllBuffers(){c.walk(e=>e.clearBuffer(!0,!1),this)}draw(e){this.children.forEach(t=>t.stream(e))}getChildren(){return this.children}add(e,t){e.order=void 0!==t?t:void 0!==e.order?e.order:this.children.length>0?Math.max.apply(this,this.children.map(e=>{var t;return null!==(t=e.order)&&void 0!==t?t:0}))+1:0,c.propagateToChilden(e,this),this.children.push(e),e.clearBuffer(),this.sortChildren()}sortChildren(){this.children.sort((e,t)=>e.order-t.order),this.children=this.children.map((e,t)=>(e.order=t,e))}isFirstLevelChild(e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].id==e.id)return!0;const t=this.getParentsOfSceneChild(e);return 1==t.length&&t[0]instanceof s.a}find(e){const t=this.getChildren();for(let r=0,i=t.length;r<i;r++){const i=t[r].find(e);if(null!==i)return i}return null}get(e){return e>=0&&e<this.children.length?this.children[e]:null}remove(e){e>=0&&e<this.children.length&&this.children.splice(e,1)}clearChildren(){this.children=[]}removeFromId(e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].id==e)return void this.children.splice(t,1)}getParentsOfSceneChild(e){const t=c.getParentsOfSceneChild(this,e);return t?(t.splice(0,1),t):[]}static getParentsOfSceneChild(e,t,r=[]){let i;if(e instanceof n.a){if(e.id==t.id)return r;if(e instanceof a.a&&e.shape){const n=r.slice();if(n.push(e),i=c.getParentsOfSceneChild(e.shape,t,n))return i}}if(e instanceof c||e instanceof s.a){const n=e.getChildren();r.push(e);for(let e=0,s=n.length;e<s;e++){const s=n[e];if(i=c.getParentsOfSceneChild(s,t,r))return i}r.pop()}return null}static walk(e,t){if(t instanceof n.a){if(!1===e(t))return!1;if(t instanceof a.a&&t.shape&&!1===c.walk(e,t.shape))return!1}if(t instanceof c||t instanceof s.a){const r=t.getChildren();for(let t=0,i=r.length;t<i;t++){const i=r[t];if(!1===c.walk(e,i))return!1}}}static propagateToChilden(e,t){e.scene=t,e instanceof s.a?e.children.forEach(e=>{c.propagateToChilden(e,t)}):e instanceof a.a&&e.shape&&(e.shape.scene=t,c.propagateToChilden(e.shape,t))}}t.a=c},function(e,t,r){"use strict";var i=r(1),n=r(15);class s{static bValueLoop(e){return"object"==typeof e&&"start"in e&&"end"in e&&"inc"in e&&"vertex"in e&&e.vertex.raw&&e.vertex.raw.length>0}static bValueVertexCallback(e){return e&&e.raw&&e.raw.length>0}static composeVertexCallback(e){if(e&&e.raw){return new Function("vertex",s.RAW_ARGUMENTS,"vertex_index","vertex_lenght","return "+e.raw)}}static composeLoop(e){const t=e.vertex.raw?new Function("index",s.RAW_ARGUMENTS,"return "+e.vertex.raw):void 0;return{start:e.start,end:e.end,inc:e.inc,vertex:t}}static bValueAnimation(e){return e&&"object"==typeof e&&e.type&&("simple"===e.type||"raw"===e.type)}static bValueDrawer(e){return e&&"object"==typeof e&&e.type&&"drawer-transformation"===e.type}static bPropTransformable(e,t){const r=n.a[e];return r&&"none"!==r.transformation&&void 0!==t&&"function"!=typeof t&&!s.bValueAnimation(t)}static getValueDrawerTransformationType(e){const t=n.a[e];return t&&"none"!==t.transformation?t.transformation:null}static getTransformedValue(e,t,r){const a=n.a[t];if(s.bPropTransformable(t,r)){let t;switch(a.transformation){case"angle":t=i.h;break;case"resolution-based":t=e.getValueFromResolution.bind(e);break;case"resolution-scaled-based":t=e.getValueFromResolutionScaled.bind(e)}return t?Array.isArray(r)?[t(r[0]),t(r[1])]:t(r):r}return r}static getTransformedValueInverse(e,t,r){const a=n.a[t];if(s.bPropTransformable(t,r)){let t;switch(a.transformation){case"angle":t=i.g;break;case"resolution-based":t=e.getValueFromResolutionScaled.bind(e);break;case"resolution-scaled-based":t=e.getValueFromResolution.bind(e)}if(t)return Array.isArray(r)?[t(r[0]),t(r[1])]:t(r)}return r}}s.RAW_ARGUMENTS="{ context, repetition, time, shape, shape_loop, data }",s.RAW_ARGUMENTS_WIT_PARENT="{ context, repetition, parent, time, shape, shape_loop, data }",t.a=s},function(e,t,r){"use strict";var i=r(1),n=r(3),s=r(2);class a extends n.a{constructor(e={}){var t;e.type="Spiral",e.bCloseShape=!1,e.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:s.a.None,e.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat(["twists","twists_start","spiral","sideLength"]),super(e,!0),this.props.spiral=Object(i.a)(e.spiral,a.types.ARCHIMEDE),this.props.twists=Object(i.a)(e.twists,2),this.props.twists_start=Object(i.a)(e.twists_start,0),this.loop={start:e=>n.a.PI2*this.getProp("twists_start",e),end:e=>n.a.PI2*(this.getProp("twists_start",e)+this.getProp("twists",e)),inc:e=>{const t=this.getProp("twists",e);return n.a.PI2*t/((4+Math.sqrt(this.sideLength[0]*this.sideLength[1]))*t)},vertex:(e,t)=>{const r=a.getRFromSpiralType(this.getProp("spiral",t),e);return[r*Math.cos(e),r*Math.sin(e)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}getProp(e,t,r){return super.getProp(e,t,r)}setProp(e,t){("twists"in(e="string"==typeof e?{[e]:t}:e)||"twists_start"in e)&&this.props.loop&&(this.props.loop.start=void 0,this.props.loop.end=void 0),super.setProp(e,t)}static getRFromSpiralType(e,t){switch(e){case a.types.ARCHIMEDE:return t/10;case a.types.HYPERBOLIC:return 1/t*3;case a.types.FERMAT:return Math.pow(t,.5)/3;case a.types.LITUUS:return Math.pow(t,-.5);case a.types.LOGARITHMIC:return Math.pow(Math.E,.2*t)/10}return 1}}a.types={ARCHIMEDE:"ARCHIMEDE",HYPERBOLIC:"HYPERBOLIC",FERMAT:"FERMAT",LITUUS:"LITUUS",LOGARITHMIC:"LOGARITHMIC"},t.a=a},function(e,t,r){"use strict";var i=r(2),n=r(14);const s={repetitions:{animable:!0,name:"repetitions",label:"Repetitions",type:"range",min:1,max:100,step:1,default:1,default_animate:20,canBArray:!0,transformation:"none",type_value:"int"},distance:{animable:!0,name:"distance",label:"Distance",type:"range",min:-200,max:200,step:1,default:0,canBArray:!0,default_animate:50,transformation:"resolution-based"},displace:{animable:!0,name:"displace",label:"Displace",type:"range",min:-360,max:360,step:1,default:0,default_animate:360,transformation:"angle"},squeezeX:{animable:!0,name:"squeezeX",label:"SqueezeX",type:"range",min:-.2,max:.2,step:.001,default:0,default_animate:.01,transformation:"resolution-scaled-based"},squeezeY:{animable:!0,name:"squeezeY",label:"SqueezeY",type:"range",min:-.2,max:.2,step:.001,default:0,default_animate:.01,transformation:"resolution-scaled-based"},rotateX:{animable:!0,name:"rotateX",label:"RotateX",type:"range",min:-360,max:360,step:1,default:0,default_animate:360,transformation:"angle"},rotateY:{animable:!0,name:"rotateY",label:"RotateY",type:"range",min:-360,max:360,step:1,default:0,default_animate:360,transformation:"angle"},rotateZ:{animable:!0,name:"rotateZ",label:"RotateZ",type:"range",min:-360,max:360,step:1,default:0,default_animate:360,transformation:"angle"},skewX:{animable:!0,name:"skewX",label:"SkewX",type:"range",min:-90,max:90,step:1,default:0,default_animate:1,transformation:"angle"},skewY:{animable:!0,name:"skewY",label:"SkewY",type:"range",min:-90,max:90,step:1,default:0,default_animate:1,transformation:"angle"},translate:{animable:!0,name:"translate",label:"Translate",type:"multiple-range",min:-200,max:200,step:1,default:[0,0],default_animate:0,transformation:"resolution-based"},scale:{animable:!0,name:"scale",label:"Scale",type:"multiple-range",min:-5,max:5,step:.01,default:[1,1],default_animate:3,transformation:"none"},rotationOrigin:{animable:!0,name:"rotationOrigin",label:"Rotation Origin",type:"multiple-range",min:-1,max:1,step:.01,default:[1,1],default_animate:[-1,1],transformation:"none"},fillColor:{animable:!0,name:"fillColor",label:"Fill",type:"color",default:"#000",default_animate:"#fff",transformation:"none"},strokeColor:{animable:!0,name:"strokeColor",label:"Stroke",type:"color",default:"#fff",default_animate:"#000",transformation:"none"},lineWidth:{animable:!0,name:"lineWidth",label:"Stroke weight",type:"slider",min:0,max:30,step:.1,default:1,default_animate:3,transformation:"none"},bCloseShape:{name:"bCloseShape",label:"Closed",type:"checkbox",default:void 0,transformation:"none"},bUseParent:{name:"bbUseParent",label:"Use parent repetition",type:"checkbox",default:!1,transformation:"none"},bAdaptBuffer:{name:"bAdaptBuffer",label:"Adapt",type:"radio",options:[{key:"None",value:i.a.None},{key:"Scale",value:i.a.Scale},{key:"Center",value:i.a.Center},{key:"Fill",value:i.a.Fill}],default:void 0,transformation:"none"},sideLength:{animable:!0,name:"sideLength",label:"Side Length",type:"multiple-range",min:.1,max:100,step:.1,default:[10,10],default_animate:20,transformation:"resolution-based"},sideNumber:{animable:!0,name:"sideNumber",label:"Side Number",type:"range",min:1,max:20,step:1,default:5,default_animate:2,transformation:"none"},n:{animable:!0,name:"n",label:"n",type:"range",min:1,max:10,step:1,default:1,default_animate:3,transformation:"none"},d:{animable:!0,name:"d",label:"d",type:"range",min:1,max:10,step:1,default:2,default_animate:4,transformation:"none"},wx:{animable:!0,name:"wx",label:"wx",type:"range",min:1,max:10,step:1,default:1,default_animate:3,transformation:"none"},wy:{animable:!0,name:"wy",label:"wy",type:"range",min:1,max:10,step:1,default:2,default_animate:4,transformation:"none"},wz:{animable:!0,name:"wz",label:"wz",type:"range",min:-360,max:360,step:1,default:0,default_animate:360,transformation:"angle"},twists:{animable:!0,name:"twists",label:"Twists",type:"range",min:1,max:60,step:.1,default:1,default_animate:3,transformation:"none"},twists_start:{animable:!0,name:"twists_start",label:"Twists start",type:"range",min:1,max:60,step:.1,default:0,default_animate:1,transformation:"none"},spiral:{name:"spiral",label:"Spiral type",type:"select",options:[{key:"ARCHIMEDE",value:n.a.types.ARCHIMEDE},{key:"FERMAT",value:n.a.types.FERMAT},{key:"HYPERBOLIC",value:n.a.types.HYPERBOLIC},{key:"LITUUS",value:n.a.types.LITUUS},{key:"LOGARITHMIC",value:n.a.types.LOGARITHMIC}],default:n.a.types.ARCHIMEDE,transformation:"none"},"loop.start":{name:"loop.start",label:"start",type:"range",default:void 0,min:0,max:100,step:.01,transformation:"none"},"loop.end":{name:"loop.end",label:"end",type:"range",default:void 0,min:0,max:100,step:.01,transformation:"none"},"loop.inc":{name:"loop.inc",label:"inc",type:"range",default:void 0,min:.01,max:100,step:.01,transformation:"none"}};t.a=s},function(e,t,r){"use strict";var i=r(39),n=r(11),s=r(18),a=r(19),o=r(20),c=r(21),h=r(22),l=r(23),u=r(14),p=r(24),f=r(10),d=r(6),g=r(3),m=r(8),b=r(12),_=r(5),v=r(9),y=r(15),S=r(13),x=r(32);t.a=new class{constructor(){this.registeredSceneChilds={},this.registeredSceneChilds={},this.registeredSceneChilds={Line:s.a,Triangle:a.a,Rect:o.a,RegularPolygon:c.a,Circle:h.a,Rose:l.a,Spiral:u.a,Lissajous:p.a,Group:_.a,Shape:f.a,ShapeLoop:g.a,ShapeBuffer:m.a}}getRegistered(){return Object.keys(this.registeredSceneChilds)}register(e,t){e in this.registeredSceneChilds?console.warn(`SceneUtilities: SceneChild "${e}" is already registered`):this.registeredSceneChilds[e]=t}unregister(e){e in this.registeredSceneChilds?delete this.registeredSceneChilds[e]:console.warn(`SceneUtilities: SceneChild "${e}" is not registered`)}create(e,t,r,s){var a;if(r=r||("string"!=typeof e?e.scene:void 0),e instanceof n.a)return this.getChildren(e).forEach(e=>this.create(e,void 0,r,s)),e;if(e in this.registeredSceneChilds){t||(t={}),t.id=t.id||Object(i.a)(),!t.name&&r&&(t.name=e+"_"+(this.getCountSceneChildOfType(r,e)+1)),t.data||(t.data={}),"props"in t.data||(t.data.props={}),"visible"in t.data||(t.data.visible=!0),"highlighted"in t.data||(t.data.highlighted=!1),"disableGhost"in t.data||(t.data.disableGhost=!1),"ShapeLoop"===e&&("loop"in t||(t.loop={start:0,end:2*Math.PI,inc:2*Math.PI/20}));const n=new this.registeredSceneChilds[e](t);if(n&&s&&this.isAPrimitive(n)){const e=null===(a=y.a.sideLength)||void 0===a?void 0:a.default;n.setProp("sideLength",S.a.getTransformedValue(s,"sideLength",e)),n.data.props.sideLength=e}return this.getChildren(n).forEach(e=>this.create(e)),n}return console.warn(`SceneUtilities: Creation failed. SceneChild "${e}" is not registered`),null}getCountSceneChildOfType(e,t){let r=0;return b.a.walk(e=>{r+=e.type==t?1:0},e),r}copy(e,t,r,i=!1){const n=e.getProps();e instanceof v.a&&(n.bUseParent=e.bUseParent),e instanceof m.a&&(n.shape=e.shape),e instanceof d.a&&(n.bCloseShape=e.bCloseShape,n.bAdaptBuffer=e.bAdaptBuffer,n.vertexCallback=e.vertexCallback),e instanceof g.a&&(n.shapeLoopPropsDependencies=e.shapeLoopPropsDependencies),e instanceof g.a&&(n.shapeLoopPropsDependencies=e.shapeLoopPropsDependencies),i&&(n.id=e.id,n.name=e.name,n.order=e.order,n.data=JSON.parse(JSON.stringify(e.data||{})));const s=this.create(e.type,n,t,r);if(s){if(e instanceof _.a)e.getChildren().forEach(e=>{const i=this.copy(e,t,r);i&&s.add(i)});else if(e instanceof f.a&&e.shape){const i=e.shape instanceof Float32Array?e.shape:this.copy(e.shape,t,r);i&&(s.shape=i)}else e instanceof m.a&&e.shape&&s.setShape(new Float32Array(e.shape));return s}return console.warn("SceneUtilities: Copy failed.",e),null}add(e,t,r,i){let n=null;if(e instanceof _.a||e instanceof b.a)n=this.create(t,r,i),n&&e.add(n);else if(e instanceof f.a)if(null==e.shape)n=this.create(t,r,i),n&&e.setShape(n);else if(e.shape instanceof v.a){if(n=this.create(t,r,i),n){const t=this.create("Group",void 0,i),r=e.shape;this.remove(e,r),e.setShape(t),t.add(r),t.add(n)}}else e.shape instanceof _.a&&this.add(e.shape,t,void 0,i);return n}remove(e,t){if(t)e instanceof _.a?e.removeFromId(t.id):e instanceof f.a&&e.setShape(void 0);else if(e.scene){const t=this.getParent(e);t?this.remove(t,e):e.scene.removeFromId(e.id)}else console.warn("SceneUtilities: Remove failed. SceneChild is not added into scene",e)}getRootParent(e){const t=this.getParents(e);return t.length>0?t[0]:null}getParent(e){const t=this.getParents(e);return t.length>0?t[t.length-1]:null}getParents(e){return e&&e.scene?e.scene.getParentsOfSceneChild(e):[]}getChildren(e){return e instanceof _.a?e.getChildren():e instanceof f.a&&e.shape?[e.shape]:[]}getChildrenPrimitives(e){let t=[];const r=this.getChildren(e);for(let e=0,i=r.length;e<i;e++)r[e]instanceof d.a?t.push(r[e]):t=t.concat(...this.getChildrenPrimitives(r[e]));return t}getNeighbors(e){if(e.scene){const t=this.getParent(e);return null==t?e.scene.getChildren():this.getChildren(t)}return[]}getCountOfSceneChildType(e,t){let r=0;return b.a.walk(e=>{r+=e.type==t?1:0},e),r}walk(e,t){t(e),this.getChildren(e).forEach(e=>t(e))}isGroup(e){return e instanceof _.a}hasShapeChild(e){return e instanceof f.a&&void 0!==e.shape}hasShapeBuffer(e){return e instanceof m.a}isAPrimitive(e){return e instanceof d.a}hasLoop(e){return e instanceof g.a}setProp(e,t,r,i){if(S.a.bValueAnimation(r))return e.data.props[t]=r,void e.setProp(t,x.a.composeAnimation(i,t,r));if("loop"!==t)if("vertexCallback"!==t)if(S.a.bPropTransformable(t,r))S.a.bValueDrawer(r)?(e.data.props[t]=r,e.setProp(t,S.a.getTransformedValue(i,t,r.value))):e.setProp(t,r);else switch(t in y.a&&"none"!==y.a[t].transformation&&(e.data.props[t]=r),t){case"bUseParent":e instanceof v.a&&(e.bUseParent=r);break;case"bCloseShape":e.setClosed(r);break;case"bAdaptBuffer":e.setAdapted(r);break;default:if(t.indexOf(".")>0){const i=t.split(".");e.setProp({[i[0]]:{[i[1]]:r}})}else e.setProp(t,r)}else e instanceof d.a&&S.a.bValueVertexCallback(r)&&(e.data.props[t]=r,e.vertexCallback=S.a.composeVertexCallback(r),e.bUseParent=!0,e.clearBuffer(!0,!0));else if(S.a.bValueLoop(r)){e.data.props[t]=r,e.setProp(t,S.a.composeLoop(r));const i=r.dynamyc;if(i!==e.shapeLoopPropsDependencies.indexOf("prop_argumens")>=0){const t=[...e.shapeLoopPropsDependencies];i?!(t.indexOf("prop_argumens")>=0)&&t.push("prop_arguments"):t.indexOf("prop_argumens")>=0&&t.splice(t.indexOf("prop_arguments",1)),e.shapeLoopPropsDependencies=t}e.clearBuffer(!0,!0)}}}},function(e,t,r){"use strict";t.a=class{constructor(){this.callbacks={}}attach(e,t){e in this.callbacks||(this.callbacks[e]=[]),this.callbacks[e].push(t)}detach(e,t){if(e in this.callbacks){const r=this.callbacks[e].indexOf(t);r>=0&&this.callbacks[e].splice(r,1)}}dispatch(e,t){if(e in this.callbacks)for(let r=0,i=this.callbacks[e].length;r<i&&!1!==this.callbacks[e][r](t);r++);}}},function(e,t,r){"use strict";var i=r(2),n=r(8);class s extends n.a{constructor(e={}){e.type="Line",e.shape=Float32Array.from([-1,0,1,0]),e.bAdaptBuffer=i.a.None,e.bCloseShape=!1,super(e)}}t.a=s},function(e,t,r){"use strict";var i=r(2),n=r(8);class s extends n.a{constructor(e={}){e.type="Triangle",e.shape=Float32Array.from([-1,-1,1,0,-1,1]),e.bAdaptBuffer=i.a.None,super(e)}}t.a=s},function(e,t,r){"use strict";var i=r(2),n=r(8);class s extends n.a{constructor(e={}){e.type="Rect",e.shape=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),e.bAdaptBuffer=i.a.None,super(e)}}t.a=s},function(e,t,r){"use strict";var i=r(3),n=r(2);class s extends i.a{constructor(e={}){var t;e.type=e.type||"RegularPolygon",e.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat(["sideNumber"]),e.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:n.a.None,super(e,!0),this.props.sideNumber=e.sideNumber,this.loop={start:0,end:i.a.PI2,inc:e=>i.a.PI2/this.getProp("sideNumber",e,5),vertex:e=>[Math.cos(e),Math.sin(e)]},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}getProp(e,t,r){return super.getProp(e,t,r)}setProp(e,t){super.setProp(e,t)}}t.a=s},function(e,t,r){"use strict";var i=r(2),n=r(3);class s extends n.a{constructor(e={}){var t;e.type="Circle",e.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat(["sideLength"]),e.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:i.a.Scale,super(e),this.loop={start:0,end:n.a.PI2,inc:()=>1/Math.pow(this.sideLength[0]*this.sideLength[1],.25)*n.a.PId2,vertex:e=>[Math.cos(e),Math.sin(e)]}}}t.a=s},function(e,t,r){"use strict";var i=r(1),n=r(3),s=r(2);class a extends n.a{constructor(e={}){var t;e.type="Rose",e.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat(["n","d","sideLength"]),e.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:s.a.Scale,super(e,!0),this.props.n=Object(i.a)(e.n,1),this.props.d=Object(i.a)(e.d,2),this.loop={start:0,end:e=>a.getFinalAngleFromK(this.getProp("n",e),this.getProp("d",e)),inc:e=>{const t=this.getProp("n",e),r=this.getProp("d",e),i=Math.pow(this.sideLength[0]*this.sideLength[1],.45),s=r<t?t/r:1.5;return n.a.PI2/(i*s)},vertex:(e,t)=>{const r=this.getProp("n",t)/this.getProp("d",t),i=Math.cos(r*e);return[i*Math.cos(e),i*Math.sin(e)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}getProp(e,t,r){return super.getProp(e,t,r)}setProp(e,t){super.setProp(e,t)}static getFinalAngleFromK(e,t){if(e==t)return n.a.PI2;const r=e/t,i=e*t;return Number.isInteger(r)||r%.5!=0?Math.PI*t*(i%2==0?2:1):4*Math.PI}}t.a=a},function(e,t,r){"use strict";var i=r(3),n=r(2);class s extends i.a{constructor(e={}){var t;e.type="Lissajous",e.shapeLoopPropsDependencies=(e.shapeLoopPropsDependencies||[]).concat(["wx","wy","wz","sideLength"]),e.bAdaptBuffer=null!==(t=e.bAdaptBuffer)&&void 0!==t?t:n.a.Scale,super(e,!0),this.props.wx=e.wx||1,this.props.wy=e.wy||2,this.props.wz=e.wz||0,this.loop={start:0,end:i.a.PI2,inc:e=>{const t=this.getProp("wx",e),r=this.getProp("wy",e),n=t==r?i.a.PId2:.5-.01*Math.min(49,t+r);return 1/Math.pow(this.sideLength[0]*this.sideLength[1],.25)*n},vertex:(e,t)=>{const r=this.getProp("wx",t),i=this.getProp("wy",t),n=this.getProp("wz",t,0);return r==i?[Math.cos(e+n),Math.sin(e)]:[Math.cos(r*e+n),Math.sin(i*e)]}},this.bStaticLoop=this.isStaticLoop(),this.bStatic=this.isStatic(),this.bStaticIndexed=this.isStaticIndexed()}getProp(e,t,r){return super.getProp(e,t,r)}setProp(e,t){super.setProp(e,t)}}t.a=s},function(e,t,r){"use strict";var i=r(30),n=r.n(i);const s={linear:(e,t,r,i)=>r*e/i+t,quadraticIn:(e,t,r,i)=>r*(e/=i)*e+t,quadraticOut:(e,t,r,i)=>-r*(e/=i)*(e-2)+t,quadraticInOut:(e,t,r,i)=>(e/=i/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t,cubicIn:(e,t,r,i)=>r*(e/=i)*e*e+t,cubicOut:(e,t,r,i)=>(e/=i,r*(--e*e*e+1)+t),cubicInOut:(e,t,r,i)=>(e/=i/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t,quarticIn:(e,t,r,i)=>r*(e/=i)*e*e*e+t,quarticOut:(e,t,r,i)=>(e/=i,-r*(--e*e*e*e-1)+t),quarticInOut:(e,t,r,i)=>(e/=i/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t,quinticIn:(e,t,r,i)=>r*(e/=i)*e*e*e*e+t,quinticOut:(e,t,r,i)=>(e/=i,r*(--e*e*e*e*e+1)+t),quinticInOut:(e,t,r,i)=>(e/=i/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t,sinusoidalIn:(e,t,r,i)=>-r*Math.cos(e/i*(Math.PI/2))+r+t,sinusoidalOut:(e,t,r,i)=>r*Math.sin(e/i*(Math.PI/2))+t,sinusoidalInOut:(e,t,r,i)=>-r/2*(Math.cos(Math.PI*e/i)-1)+t,exponentialIn:(e,t,r,i)=>r*Math.pow(2,10*(e/i-1))+t,exponentialOut:(e,t,r,i)=>r*(1-Math.pow(2,-10*e/i))+t,exponentialInOut:(e,t,r,i)=>(e/=i/2)<1?r/2*Math.pow(2,10*(e-1))+t:(e--,r/2*(2-Math.pow(2,-10*e))+t),circularIn:(e,t,r,i)=>(e/=i,-r*(Math.sqrt(1-e*e)-1)+t),circularOut:(e,t,r,i)=>(e/=i,e--,r*Math.sqrt(1-e*e)+t),circularInOut:(e,t,r,i)=>(e/=i/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:(e-=2,r/2*(Math.sqrt(1-e*e)+1)+t),elasticIn:function(e,t,r,i,n,s){if(0==e)return t;if(1==(e/=i))return t+r;if(s||(s=.3*i),!n||n<Math.abs(r)){n=r;var a=s/4}else a=s/(2*Math.PI)*Math.asin(r/n);return-n*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s)+t},elasticOut:function(e,t,r,i,n,s){if(0==e)return t;if(1==(e/=i))return t+r;if(s||(s=.3*i),!n||n<Math.abs(r)){n=r;var a=s/4}else a=s/(2*Math.PI)*Math.asin(r/n);return n*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/s)+r+t},elasticBoth:function(e,t,r,i,n,s){if(0==e)return t;if(2==(e/=i/2))return t+r;if(s||(s=i*(.3*1.5)),!n||n<Math.abs(r)){n=r;var a=s/4}else a=s/(2*Math.PI)*Math.asin(r/n);return e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s)*-.5+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s)*.5+r+t},backIn:function(e,t,r,i,n){return void 0===n&&(n=1.70158),r*(e/=i)*e*((n+1)*e-n)+t},backOut:function(e,t,r,i,n){return void 0===n&&(n=1.70158),r*((e=e/i-1)*e*((n+1)*e+n)+1)+t},backBoth:function(e,t,r,i,n){return void 0===n&&(n=1.70158),(e/=i/2)<1?r/2*(e*e*((1+(n*=1.525))*e-n))+t:r/2*((e-=2)*e*((1+(n*=1.525))*e+n)+2)+t},bounceIn:function(e,t,r,i){return r-s.bounceOut(i-e,0,r,i)+t},bounceOut:function(e,t,r,i){return(e/=i)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(e,t,r,i){return e<i/2?.5*s.bounceIn(2*e,0,r,i)+t:.5*s.bounceOut(2*e-i,0,r,i)+.5*r+t}};var a=s,o=r(1);const c={loop:e=>c.compose(Object.assign(Object.assign({mode:"sinusoidal",mode_function:"cos"},e),{type:"loop",delay:void 0})),uncontrolledLoop:e=>c.compose(Object.assign(Object.assign({mode:"easing",mode_function:"linear"},e),{type:"uncontrolled-loop"})),static:e=>c.compose(Object.assign(Object.assign({mode:"easing",mode_function:"linear"},e),{type:"static"})),compose:e=>{if("string"!=typeof e.from&&"string"!=typeof e.to){const t=Array.isArray(e.from)||Array.isArray(e.to),r=t?Object(o.f)(e.from):e.from,i=t?Object(o.f)(e.to):e.to,n=t?(t,n)=>{const s=e.invertOdd&&t%2==1?i:r,a=e.invertOdd&&t%2==1?r:i;return"int"===e.type_value?[Math.round(s[0]+n*(a[0]-s[0])),Math.round(s[1]+n*(a[1]-s[1]))]:[s[0]+n*(a[0]-s[0]),s[1]+n*(a[1]-s[1])]}:(t,n)=>{const s=e.invertOdd&&t%2==1?i:r,a=e.invertOdd&&t%2==1?r:i;return"int"===e.type_value?Math.round(s+n*(a-s)):s+n*(a-s)};return h(e,(e,t)=>n(e.repetition.current_index,t))}{const t=new n.a(e.from),r=new n.a(e.to),i="hue"==e.colorTransitionMode?u:l;return h(e,(n,s)=>{const a=e.invertOdd&&n.repetition.current_index%2==1?r:t,o=e.invertOdd&&n.repetition.current_index%2==1?t:r;return i(a,o,s)})}}};function h(e,t){let{durate:r,type:i,mode:n,mode_function:s,delay:o}=e;return"static"===i?o&&o>0?function(e){return t(e,e.time<=o?0:e.time-o>=r?1:a[s](e.time-o,0,1,r))}:function(e){return t(e,e.time<=r?a[s](e.time,0,1,r):1)}:"loop"===i?"sinusoidal"==n?function(e){const i=2*(e.time||0)*Math.PI/r;return t(e,.5+.5*Math[s](i))}:function(e){const i=r/2,n=e.time%r;return t(e,n<=i?a[s](n,0,1,i):a[s](i-(n-i),0,1,i))}:"sinusoidal"==n?function(e){let i=e.time%(r+o);i=i<=o?0:i-o;const n=2*(i||0)*Math.PI/r;return t(e,.5+.5*Math[s](n))}:o&&o>0?function(e){const i=e.time%(r+o);return t(e,i<=o?0:i-o>=r?1:a[s](i-o,0,1,r))}:function(e){const i=e.time%r;return t(e,i<=r?a[s](i,0,1,r):1)}}function l(e,t,r){const i=e.getAlpha(),n=t.getAlpha(),s=e.getRgb(),a=t.getRgb(),o=s.r+r*(a.r-s.r),c=s.g+r*(a.g-s.g),h=s.b+r*(a.b-s.b),l=i+r*(n-i);return`rgba(${Math.floor(o)},${Math.floor(c)},${Math.floor(h)},${l<=0?0:l>=1?1:l})`}function u(e,t,r){const i=e.getAlpha(),n=t.getAlpha(),s=e.getHsl(),a=t.getHsl(),o=s.h+r*(a.h-s.h),c=s.s+r*(a.s-s.s),h=s.l+r*(a.l-s.l),l=i+r*(n-i);return`hsla(${Math.floor(360*o)},${Math.floor(100*c)}%,${Math.floor(100*h)}%,${l<=0?0:l>=1?1:l})`}t.a=c},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0;t.newId=(e=0)=>++i+e,t.twoDigits=e=>(e<=9?"0":"")+e,t.clamp01=e=>t.clamp(0,1,e),t.clamp=(e,t,r)=>r<=e?e:r>=t?t:r,t.relativeClamp=(e,r,i,n,s)=>t.clamp(n,s,(e-r)/(i-r)*(s-n)+n),t.fix=(e,t=20)=>+parseFloat(e).toFixed(t),t.nextNumber=(e,t,r=1)=>(e+r)%t,t.prevNumber=(e,t,r=1)=>((e-=r)<0?e+t:e)%t,t.randomFloat=(e,t)=>Math.random()*(t-e)+e,t.randomInt=(e,t)=>Math.trunc(Math.random()*(t-e+1))+e,t.lerp=(e,r,i)=>e+(r-e)*t.clamp01(i),t.round=e=>~~(e+.5)},function(e,t,r){"use strict";var i=r(0),n=r(12),s=r(17);class a extends s.a{constructor(){super(),this.sequence={start:0,end:6e4,durate:6e4,framerate:60,frames:360},this.fps=this.sequence.framerate,this.fps_samples_size=30,this.fps_samples=[],this.fps_samples_index=0,this.b_sequence_started=!1,this.current_frame=-1,this.last_tick=0,this.calculateTickAndSequence()}getSequence(){return Object.assign({},this.sequence)}setSequence(e,t,r){this.sequence.start=e,this.sequence.end=t,this.sequence.framerate=r,this.calculateTickAndSequence(),this.dispatch("timeline:update_sequence",this.getSequence())}getFramerate(){return this.sequence.framerate}setFramerate(e){this.sequence.framerate=e,this.calculateTickAndSequence(),this.dispatch("timeline:update_sequence",this.getSequence())}calculateTickAndSequence(){this.tick_time=1e3/this.sequence.framerate,this.sequence.frames=Math.floor((this.sequence.end-this.sequence.start)/1e3*this.sequence.framerate),this.sequence.durate=this.sequence.end-this.sequence.start}getSequenceStartTime(){return this.sequence.start}setSequenceStartTime(e){this.sequence.start=e,this.calculateTickAndSequence(),this.dispatch("timeline:update_sequence",this.getSequence())}getSequenceEndTime(){return this.sequence.end}setSequenceEndTime(e){this.sequence.end=e,this.calculateTickAndSequence(),this.dispatch("timeline:update_sequence",this.getSequence())}getSequenceDuration(){return this.sequence.end-this.sequence.start}getFramesCount(){return this.sequence.frames}start(){this.b_sequence_started||(this.b_sequence_started=!0,this.last_tick=0,this.dispatch("timeline:change_status",a.START))}pause(){this.b_sequence_started&&(this.b_sequence_started=!1,this.dispatch("timeline:change_status",a.PAUSE))}stop(){(1!=this.current_frame||this.b_sequence_started)&&(this.b_sequence_started=!1,this.current_frame=-1,this.last_tick=0,this.dispatch("timeline:progress",{current_frame:this.current_frame,current_time:0,fps:this.fps}),this.dispatch("timeline:change_status",a.STOP))}tick(e){if(this.b_sequence_started){const t=e,r=t-this.last_tick;if(r>=this.tick_time){const e=(t-this.last_tick)/1e3;return this.calculateFPS(1/e),this.last_tick=t-r%this.tick_time,this.current_frame=(this.current_frame+1)%this.sequence.frames,this.dispatch("timeline:progress",{current_frame:this.current_frame,current_time:this.getTime(),fps:this.fps}),!0}}return!1}calculateFPS(e){const t=this.fps_samples.length;if(t>0){let e=0;for(let r=0;r<t;r++)e+=this.fps_samples[r];this.fps=Math.round(e/t)}this.fps_samples[this.fps_samples_index]=Math.round(e),this.fps_samples_index=(this.fps_samples_index+1)%this.fps_samples_size}bSequenceStarted(){return this.b_sequence_started}getCurrentFrame(){return this.current_frame}getFrameTime(e){return e=e<0?this.sequence.frames-e%this.sequence.frames:e%this.sequence.frames,(this.sequence.start+e*this.tick_time)%this.sequence.end}getFrameAtTime(e){return Math.round((this.sequence.start+e)%this.sequence.end/this.tick_time)}setFrame(e){this.current_frame=e-1}getTickTime(){return this.tick_time}getTime(){return(this.sequence.start+(this.current_frame<=0?0:this.current_frame)*this.tick_time)%this.sequence.end}setTime(e){e=e<=this.sequence.start?this.sequence.start:e>=this.sequence.end?this.sequence.end:e,this.current_frame=Math.floor(e/this.tick_time)-1,this.dispatch("timeline:progress",{current_frame:this.current_frame,current_time:e,fps:this.fps})}}a.START="start",a.PAUSE="pause",a.STOP="stop";var o=a,c=r(16);var h=class{constructor(){this.frames={}}exist(e){return e in this.frames}get(e){return this.exist(e)?this.frames[e]:null}count(){return Object.keys(this.frames).length}push(e,t){this.frames[e]=t.getImageData(0,0,t.canvas.width,t.canvas.height)}flush(){this.frames={}}getRenderedFrames(){return Object.keys(this.frames).map(e=>+e)}},l=r(1);class u extends s.a{constructor(e,t,r={},i,n=0,s=!1){var a,c,l,u,p,f,d;if(super(),this.bBuffering=!1,this.timeline=new o,this.resolution=n||(e&&e.width?e.width:0),this.ratio=i||(e&&e.width&&e.height?e.width/e.height:1),this.bBuffering=s,this.buffer=new h,e){const t=this.ratio>=1?e.width:e.width*this.ratio,r=this.ratio>=1?e.height/this.ratio:e.height;e.resize(t,r),this.setScene(e)}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas){const e=t;this.setCanvas(e)}else if(t){const e=document.createElement("canvas");t.appendChild(e),this.setCanvas(e)}this.drawOptions={scale:null!==(a=r.scale)&&void 0!==a?a:1,translate:null!==(c=r.translate)&&void 0!==c?c:[0,0],time:null!==(l=r.time)&&void 0!==l?l:0,simmetricLine:null!==(u=r.simmetricLine)&&void 0!==u?u:0,clearCanvas:null===(p=r.clearCanvas)||void 0===p||p,fixedLineWidth:null!==(f=r.fixedLineWidth)&&void 0!==f&&f,noBackground:null!==(d=r.noBackground)&&void 0!==d&&d,ghosts:r.ghosts||0,ghost_skip_time:r.ghost_skip_time||0,ghost_skip_function:r.ghost_skip_function,backgroundImage:r.backgroundImage},this.draw_id=null,this.redraw_id=null,this.animation_id=null,this.draw=this.draw.bind(this),this.animate=this.animate.bind(this),this.startAnimation=this.startAnimation.bind(this)}setBuffering(e){this.bBuffering=e,this.flushBuffer()}getBBuffering(){return this.bBuffering}setScene(e){this.scene=e,!this.resolution&&this.scene.width&&(this.resolution=this.scene.width),this.canvas&&this.setCanvas(this.canvas)}getScene(){return this.scene}getTimeline(){return this.timeline}setCanvas(e){let t;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)t=e;else{for(t=this.canvas||document.createElement("canvas");e.lastChild;)e.removeChild(e.lastChild);e.appendChild(t)}else t=e;this.canvas=t,this.context=this.canvas.getContext("2d",{alpha:!0,desynchronized:!1}),this.scene&&this.resize(this.scene.width,this.scene.height)}getCanvas(){return this.canvas}getContext(){return this.context}resize(e,t,r,i){r=r||this.ratio||e/t;const s=Math.max(e,t);e=r>=1?s:s*r,t=r>=1?s/r:s,this.ratio=r,this.scene&&this.scene.resize(e,t),this.canvas&&(this.canvas.width=1*e,this.canvas.height=1*t,"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement&&(this.canvas.style.width=e+"px",this.canvas.style.height=t+"px")),i&&i!=this.resolution&&this.scene&&(this.resolution=i,n.a.walk(e=>{const t=e.data.props;Object.keys(t).forEach(r=>{c.a.setProp(e,r,t[r],this)})},this.scene)),this.flushBuffer(),this.dispatch("drawer-canvas:resize")}flushBuffer(){this.bBuffering&&(this.buffer.flush(),this.dispatch("drawer-canvas:buffer_flush"))}getRenderedFrames(){return this.bBuffering?this.buffer.getRenderedFrames():[]}setRatio(e){this.resize(this.scene.width,this.scene.height,e)}getRatio(){return this.ratio}getResolution(){return this.resolution}setResolution(e){this.resize(this.scene.width,this.scene.height,this.ratio,e)}getValueFromResolution(e){return e*this.resolution/200}getValueFromResolutionScaled(e){return 200*e/this.resolution}setOption(e,t){if("object"==typeof e){const t=Object.keys(e);for(let r=0,i=t.length;r<i;r++)this.drawOptions[t[r]]=e[t[r]]}else this.drawOptions[e]=t;this.flushBuffer()}getOption(e,t){var r;return null!==(r=this.drawOptions[e])&&void 0!==r?r:t}getOptions(){return this.drawOptions}animate(e){this.timeline.bSequenceStarted()&&(this.animation_id=requestAnimationFrame(this.animate),this.timeline.tick(e)&&this.draw())}startAnimation(){this.stopAnimation(),this.timeline.start(),this.animation_id=requestAnimationFrame(this.animate)}stopAnimation(){this.timeline.stop(),this.animation_id&&cancelAnimationFrame(this.animation_id)}pauseAnimation(){this.timeline.pause(),this.animation_id&&cancelAnimationFrame(this.animation_id)}playAnimation(){this.timeline.start(),requestAnimationFrame(this.animate)}draw(){var e,t;let r=0;const i=Object.assign({},this.drawOptions);i.ghost_index=void 0,i.clearCanvas=this.drawOptions.clearCanvas||this.timeline.getCurrentFrame()<=0,i.time=this.timeline.getTime();const n=this.timeline.getFrameAtTime(i.time);if(this.dispatch("drawer-canvas:before_draw",{current_frame:n,current_time:i.time}),this.bBuffering&&this.buffer.exist(n))null===(e=this.context)||void 0===e||e.putImageData(this.buffer.get(n),0,0);else{if(r+=u.draw(this.scene,this.context,i,this.resolution),i.ghosts){const e=this.timeline.getTime(),n=this.timeline.getSequenceEndTime();for(let s=1;s<=i.ghosts;s++){const a=e-(i.ghost_skip_function?i.ghost_skip_function(s):s*(null!==(t=i.ghost_skip_time)&&void 0!==t?t:30));i.clearCanvas=!1,i.ghost_index=s,i.time=a<0?a+n:a>n?a%n:a,r+=u.draw(this.scene,this.context,i,this.resolution)}}this.bBuffering&&this.context&&(this.buffer.push(n,this.context),this.buffer.count()>=this.timeline.getFramesCount()&&this.dispatch("drawer-canvas:buffer_loaded"))}return r}redraw(){this.timeline.bSequenceStarted()?this.drawOptions.clearCanvas||null!=typeof this.drawOptions.ghosts&&0!=this.drawOptions.ghosts||(this.stopAnimation(),this.redraw_id&&cancelAnimationFrame(this.redraw_id),this.redraw_id=requestAnimationFrame(this.startAnimation)):(this.draw_id&&cancelAnimationFrame(this.draw_id),!this.drawOptions.clearCanvas&&(null==typeof this.drawOptions.ghosts||0==this.drawOptions.ghosts)&&this.timeline.stop(),this.draw_id=requestAnimationFrame(this.draw))}static draw(e,t,r,n){var s,a,o,c;const h=Object(l.d)();if(t){const h=null!==(s=r.scale)&&void 0!==s?s:1,l=null!==(a=r.translate)&&void 0!==a?a:[0,0],u=null!==(o=r.time)&&void 0!==o?o:0,p=null!==(c=r.simmetricLine)&&void 0!==c?c:0,f=r.fixedLineWidth,d=r.clearCanvas,g=r.noBackground,m=r.backgroundImage,b=void 0!==r.ghosts&&r.ghosts>0&&void 0!==r.ghost_index&&r.ghost_index>0,_=b?1-r.ghost_index/(r.ghosts+.5):1,v=e.width,y=e.height,S=[v/((n=n||v)/(v>y?1:y/v))*h,y/(n/(v>y?v/y:1))*h],x=[v/2-(h>1?l[0]*v/(1/((h-1)/2)):0),y/2-(h>1?l[1]*y/(1/((h-1)/2)):0)];if(e.current_time=u,e.getChildren().forEach(e=>{e.data&&!1===e.data.visible&&b&&!0===e.data.disableGhost||e.generate(u,!0)}),d&&(g?t.clearRect(0,0,v,y):(t.fillStyle=e.background,t.fillRect(0,0,v,y),m&&t.drawImage(m,0,0,v,y))),p>0){const r=Math.PI/p,n=Math.max(v,y)/2,s=[n/2,n/2];for(let a=0;a<p;a++){const o=Float32Array.from([-n,-n]),c=Float32Array.from([2*n,2*n]),h=a*r+Math.PI/4;i.a.rotateZ(o,s,h),i.a.rotateZ(c,s,h),t.beginPath(),t.strokeStyle=e.mainColor,t.lineWidth=1,t.moveTo((o[0]-n/2)*S[0]+x[0],(o[1]-n/2)*S[1]+x[1]),t.lineTo((c[0]-n/2)*S[0]+x[0],(c[1]-n/2)*S[1]+x[1]),t.stroke()}}e.draw(({lineWidth:r,strokeColor:i,fillColor:n,shape:s,buffer:a,buffer_length:o,current_buffer_index:c})=>{if(!s.data||!(!1===s.data.visible||b&&!0===s.data.disableGhost)){t.beginPath(),t.moveTo((a[c]-v/2)*S[0]+x[0],(a[c+1]-y/2)*S[1]+x[1]);for(let e=2;e<o;e+=2)t.lineTo((a[c+e]-v/2)*S[0]+x[0],(a[c+e+1]-y/2)*S[1]+x[1]);if(s&&s.isClosed()&&t.closePath(),s&&s.data&&s.data.highlighted)return t.lineWidth=3*(r||1)*h,t.strokeStyle=e.mainColor,void t.stroke();if(n){if(b){const e=/\((.+),(.+),(.+),(.+)?\)/g.exec(n);if(e){let[,t,r,i,s]=e;const a=s?parseFloat(s):1,o=a<=0?0:a*_;n=n.indexOf("rgb")>=0?`rgba(${t},${r},${i},${o})`:`hsla(${t},${r},${i},${o})`}}t.fillStyle=n,t.fill()}if(i&&r){if(b){const e=/\((.+),(.+),(.+),(.+)?\)/g.exec(i);if(e){let[,t,r,n,s]=e;const a=s?parseFloat(s):1,o=a<=0?0:a*_;i=i.indexOf("rgb")>=0?`rgba(${t},${r},${n},${o})`:`hsla(${t},${r},${n},${o})`}r*=_}t.lineWidth=f?r:r*h,t.strokeStyle=i,t.stroke()}}})}return Object(l.d)()-h}}t.a=u},function(e,t,r){var i;!function(){"use strict";var n=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,a=1/6,o=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;function h(e){var t;t="function"==typeof e?e:e?function(){var e=0,t=0,r=0,i=1,n=u();e=n(" "),t=n(" "),r=n(" ");for(var s=0;s<arguments.length;s++)(e-=n(arguments[s]))<0&&(e+=1),(t-=n(arguments[s]))<0&&(t+=1),(r-=n(arguments[s]))<0&&(r+=1);return n=null,function(){var n=2091639*e+2.3283064365386963e-10*i;return e=t,t=r,r=n-(i=0|n)}}(e):Math.random,this.p=l(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function l(e){var t,r=new Uint8Array(256);for(t=0;t<256;t++)r[t]=t;for(t=0;t<255;t++){var i=t+~~(e()*(256-t)),n=r[t];r[t]=r[i],r[i]=n}return r}function u(){var e=4022871197;return function(t){t=t.toString();for(var r=0;r<t.length;r++){var i=.02519603282416938*(e+=t.charCodeAt(r));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}h.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var r,i,a=this.permMod12,o=this.perm,c=this.grad3,h=0,l=0,u=0,p=(e+t)*n,f=Math.floor(e+p),d=Math.floor(t+p),g=(f+d)*s,m=e-(f-g),b=t-(d-g);m>b?(r=1,i=0):(r=0,i=1);var _=m-r+s,v=b-i+s,y=m-1+2*s,S=b-1+2*s,x=255&f,w=255&d,P=.5-m*m-b*b;if(P>=0){var M=3*a[x+o[w]];h=(P*=P)*P*(c[M]*m+c[M+1]*b)}var A=.5-_*_-v*v;if(A>=0){var C=3*a[x+r+o[w+i]];l=(A*=A)*A*(c[C]*_+c[C+1]*v)}var O=.5-y*y-S*S;if(O>=0){var E=3*a[x+1+o[w+1]];u=(O*=O)*O*(c[E]*y+c[E+1]*S)}return 70*(h+l+u)},noise3D:function(e,t,r){var i,n,s,o,c,h,l,u,p,f,d=this.permMod12,g=this.perm,m=this.grad3,b=(e+t+r)*(1/3),_=Math.floor(e+b),v=Math.floor(t+b),y=Math.floor(r+b),S=(_+v+y)*a,x=e-(_-S),w=t-(v-S),P=r-(y-S);x>=w?w>=P?(c=1,h=0,l=0,u=1,p=1,f=0):x>=P?(c=1,h=0,l=0,u=1,p=0,f=1):(c=0,h=0,l=1,u=1,p=0,f=1):w<P?(c=0,h=0,l=1,u=0,p=1,f=1):x<P?(c=0,h=1,l=0,u=0,p=1,f=1):(c=0,h=1,l=0,u=1,p=1,f=0);var M=x-c+a,A=w-h+a,C=P-l+a,O=x-u+2*a,E=w-p+2*a,k=P-f+2*a,T=x-1+.5,I=w-1+.5,R=P-1+.5,L=255&_,B=255&v,q=255&y,F=.6-x*x-w*w-P*P;if(F<0)i=0;else{var j=3*d[L+g[B+g[q]]];i=(F*=F)*F*(m[j]*x+m[j+1]*w+m[j+2]*P)}var U=.6-M*M-A*A-C*C;if(U<0)n=0;else{var N=3*d[L+c+g[B+h+g[q+l]]];n=(U*=U)*U*(m[N]*M+m[N+1]*A+m[N+2]*C)}var D=.6-O*O-E*E-k*k;if(D<0)s=0;else{var H=3*d[L+u+g[B+p+g[q+f]]];s=(D*=D)*D*(m[H]*O+m[H+1]*E+m[H+2]*k)}var V=.6-T*T-I*I-R*R;if(V<0)o=0;else{var $=3*d[L+1+g[B+1+g[q+1]]];o=(V*=V)*V*(m[$]*T+m[$+1]*I+m[$+2]*R)}return 32*(i+n+s+o)},noise4D:function(e,t,r,i){var n,s,a,h,l,u,p,f,d,g,m,b,_,v,y,S,x,w=this.perm,P=this.grad4,M=(e+t+r+i)*o,A=Math.floor(e+M),C=Math.floor(t+M),O=Math.floor(r+M),E=Math.floor(i+M),k=(A+C+O+E)*c,T=e-(A-k),I=t-(C-k),R=r-(O-k),L=i-(E-k),B=0,q=0,F=0,j=0;T>I?B++:q++,T>R?B++:F++,T>L?B++:j++,I>R?q++:F++,I>L?q++:j++,R>L?F++:j++;var U=T-(u=B>=3?1:0)+c,N=I-(p=q>=3?1:0)+c,D=R-(f=F>=3?1:0)+c,H=L-(d=j>=3?1:0)+c,V=T-(g=B>=2?1:0)+2*c,$=I-(m=q>=2?1:0)+2*c,Y=R-(b=F>=2?1:0)+2*c,z=L-(_=j>=2?1:0)+2*c,Z=T-(v=B>=1?1:0)+3*c,X=I-(y=q>=1?1:0)+3*c,G=R-(S=F>=1?1:0)+3*c,W=L-(x=j>=1?1:0)+3*c,K=T-1+4*c,J=I-1+4*c,Q=R-1+4*c,ee=L-1+4*c,te=255&A,re=255&C,ie=255&O,ne=255&E,se=.6-T*T-I*I-R*R-L*L;if(se<0)n=0;else{var ae=w[te+w[re+w[ie+w[ne]]]]%32*4;n=(se*=se)*se*(P[ae]*T+P[ae+1]*I+P[ae+2]*R+P[ae+3]*L)}var oe=.6-U*U-N*N-D*D-H*H;if(oe<0)s=0;else{var ce=w[te+u+w[re+p+w[ie+f+w[ne+d]]]]%32*4;s=(oe*=oe)*oe*(P[ce]*U+P[ce+1]*N+P[ce+2]*D+P[ce+3]*H)}var he=.6-V*V-$*$-Y*Y-z*z;if(he<0)a=0;else{var le=w[te+g+w[re+m+w[ie+b+w[ne+_]]]]%32*4;a=(he*=he)*he*(P[le]*V+P[le+1]*$+P[le+2]*Y+P[le+3]*z)}var ue=.6-Z*Z-X*X-G*G-W*W;if(ue<0)h=0;else{var pe=w[te+v+w[re+y+w[ie+S+w[ne+x]]]]%32*4;h=(ue*=ue)*ue*(P[pe]*Z+P[pe+1]*X+P[pe+2]*G+P[pe+3]*W)}var fe=.6-K*K-J*J-Q*Q-ee*ee;if(fe<0)l=0;else{var de=w[te+1+w[re+1+w[ie+1+w[ne+1]]]]%32*4;l=(fe*=fe)*fe*(P[de]*K+P[de+1]*J+P[de+2]*Q+P[de+3]*ee)}return 27*(n+s+a+h+l)}},h._buildPermutationTable=l,void 0===(i=function(){return h}.call(t,r,t,e))||(e.exports=i),t.SimplexNoise=h,e.exports=h}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(27),n=r(31),s=r(36),a=r(38);t.default=class{constructor(e){const t=s.default.parse(e);this.rgb=this.getRgbFromMath(t),this.hsl=a.default.rgbToHsl(this.rgb),this.hsv=a.default.rgbToHsv(this.rgb),this.hex=a.default.rgbToHex(this.rgb),this.cmyk=a.default.rgbToCmyk(this.rgb),this.setAlpha(["rgba","hsla","hsva"].indexOf(t.type)>=0&&t.value.length>=3?t.value[3]:1)}setAlpha(e){this.alpha=e,this.alpha=this.alpha>1?this.alpha/255:this.alpha}getAlpha(){return this.alpha}getRgbFromMath(e){switch(e.type){case"rgb":case"rgba":const t=n.toFloat(e.value);return{r:t[0],g:t[1],b:t[2]};case"hsl":case"hsla":const r=n.toFloat(e.value);return a.default.hslToRgb({h:r[0],s:r[1],l:r[2]});case"hsv":case"hsva":const i=n.toFloat(e.value);return a.default.hsvToRgb({h:i[0],s:i[1],v:i[2]});case"cmyk":const s=n.toFloat(e.value);return a.default.cmykToRgb({c:s[0],m:s[1],y:s[2],k:s[3]});case"hex3":case"hex4":case"hex6":case"hex8":return a.default.hexToRgb(e.value)}}getRgb(){return Object.assign({},this.rgb)}getHsl(){return Object.assign({},this.hsl)}getHsv(){return Object.assign({},this.hsv)}getCmyk(){return Object.assign({},this.cmyk)}toString(e,t,r,i,n=!1,s=!1){const a=s?"%":"";return`${e+(n?"a":"")}(${Math.round(t)}, ${Math.round(r)+a}, ${Math.round(i)+a}${n?", "+this.alpha:""})`}toRGB(e=!1){return this.toString("rgb",this.rgb.r,this.rgb.g,this.rgb.b,e,!1)}toHSL(e=!1){return this.toString.call(this,"hsl",i.relativeClamp(this.hsl.h,0,1,0,360),100*this.hsl.s,100*this.hsl.l,e,!0)}toHSV(e=!1){return this.toString.call(this,"hsv",i.relativeClamp(this.hsv.h,0,1,0,360),100*this.hsv.s,100*this.hsv.v,e,!0)}toCMYK(){return`cmyk(${i.fix(100*this.cmyk.c,2)}%, ${i.fix(100*this.cmyk.m,2)}%, ${i.fix(100*this.cmyk.y,2)}%, ${i.fix(100*this.cmyk.k,2)}%)`}toHEX(){return this.hex}toRGBA(){return this.toRGB(!0)}toHSLA(){return this.toHSL(!0)}toHSVA(){return this.toHSV(!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(35),n=r(27);t.toInt=e=>e.map(e=>parseInt(e)),t.toFloat=e=>e.map(e=>parseFloat(e)),t.hasObjectProperty=(e,r,i)=>t.indexOfObjectProperty(e,r,i)>=0,t.indexOfObjectProperty=(e,t,r)=>{for(let n=e.length-1;n>=0;n--)if("function"==typeof r?r(i.getProperty(e[n],t,"Nil"),e[n]):i.getProperty(e[n],t)===r)return n;return-1},t.intersect=(e,t)=>{var r=0,i=0;const n=new Array;for(;r<e.length&&i<t.length;)e[r]<t[i]?r++:(e[r]>t[i]||(n.push(e[r]),r++),i++);return n},t.nextElement=(e,t)=>e[n.nextNumber(t,e.length)],t.prevElement=(e,t)=>e[n.prevNumber(t,e.length)],t.randomElement=e=>e[n.randomInt(0,e.length-1)]},function(module,__webpack_exports__,__webpack_require__){"use strict";var _scene_utilities_ScenePropUtilities__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),_Simple__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25);const Animation={composeAnimation:(drawer,prop_name,animation)=>{switch(animation.type){case"simple":{const e=Object.assign({},animation.value);return e.from=_scene_utilities_ScenePropUtilities__WEBPACK_IMPORTED_MODULE_0__.a.getTransformedValue(drawer,prop_name,e.from),e.to=_scene_utilities_ScenePropUtilities__WEBPACK_IMPORTED_MODULE_0__.a.getTransformedValue(drawer,prop_name,e.to),_Simple__WEBPACK_IMPORTED_MODULE_1__.a.compose(e)}case"raw":{const rawValue=animation.value;return eval(rawValue.raw)}}}};__webpack_exports__.a=Animation},function(e,t,r){"use strict";r.r(t);var i=r(12);r.d(t,"Scene",(function(){return i.a}));var n=r(11);r.d(t,"SceneChild",(function(){return n.a}));var s=r(5);r.d(t,"Group",(function(){return s.a}));var a=r(18);r.d(t,"Line",(function(){return a.a}));var o=r(19);r.d(t,"Triangle",(function(){return o.a}));var c=r(20);r.d(t,"Rect",(function(){return c.a}));var h=r(21);r.d(t,"RegularPolygon",(function(){return h.a}));var l=r(22);r.d(t,"Circle",(function(){return l.a}));var u=r(23);r.d(t,"Rose",(function(){return u.a}));var p=r(14);r.d(t,"Spiral",(function(){return p.a}));var f=r(24);r.d(t,"Lissajous",(function(){return f.a}));var d=r(10);r.d(t,"Shape",(function(){return d.a}));var g=r(6);r.d(t,"ShapePrimitive",(function(){return g.a}));var m=r(3);r.d(t,"ShapeLoop",(function(){return m.a}));var b=r(8);r.d(t,"ShapeBuffer",(function(){return b.a}));var _=r(0);r.d(t,"Vec2",(function(){return _.a}));var v=r(1);r.d(t,"toDegrees",(function(){return v.g})),r.d(t,"toRadians",(function(){return v.h})),r.d(t,"isDef",(function(){return v.c})),r.d(t,"clamp",(function(){return v.b})),r.d(t,"relativeClamp",(function(){return v.e}));var y=r(7);r.d(t,"Context",(function(){return y.a}));var S=r(2);r.d(t,"ShapePrimitiveAdaptMode",(function(){return S.a}));var x=r(28);r.d(t,"DrawerCanvas",(function(){return x.a}));var w=r(25);r.d(t,"Animation",(function(){return w.a}))},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDef=e=>void 0!==e,t.isUndef=e=>!t.isDef(e),t.isEqual=(e,r)=>{if("object"!=typeof e||null===e||null===r)return e===r;{const i=Object.keys(e);for(let n=0,s=i.length;n<s;n++)if(void 0===r[i[n]]||!t.isEqual(e[i[n]],r[i[n]]))return!1}return!0},t.map=(e,t)=>(Object.keys(e).forEach((r,i)=>{e[r]=t(e[r],r,i)}),e),t.each=(e,t)=>{Object.keys(e).forEach((r,i)=>{t(e[r],r,i)})},t.hasProperty=(e,t)=>void 0!==this.getProperty(e,t,void 0),t.getProperty=(e,t,r=null)=>{const i=t.split("."),n=i.length;for(let t=0;t<n;t++){const n=i[t],s=parseInt(n);if("*"==n&&Array.isArray(e))return e.map(e=>this.getProperty(e,i.slice(t+1).join("."),r));if(!isNaN(s)&&Array.isArray(e))return this.getProperty(e[t],i.slice(t+1).join("."),r);if(!e.hasOwnProperty(n))return r;if(void 0===(e=e[n]))return r}return e},t.setProperties=(e,t,r)=>{t.forEach((t,i)=>{let n=e;const s=t.split("."),a=s.pop();s.forEach(e=>{n=n[e]||{}}),n[a]=Array.isArray(r)?r[i]:"function"==typeof r?r(n[a]):r})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(37),n=r(31),s=r(27);class a{static parse(e){return"string"==typeof e?a.fromString(e):a.fromObject(e)}static fromString(e){let t,r=null;for(let i=a.MATCHES.length-1;i>=0;i--)(t=a.MATCHES[i].regexp.exec(e))&&(r={type:a.MATCHES[i].type,value:t.slice(1)});if(!r)throw new i.ColorNotValidException(e,a.MATCHES);if(-1!=r.type.indexOf("hex"))return r;r.value=n.toFloat(r.value);const s="string"==typeof a.MATCH_VALUES[r.type]?a.MATCH_VALUES[a.MATCH_VALUES[r.type]]:a.MATCH_VALUES[r.type];for(let e in s.possibilities)if(a.isFromZeroTo(r.value,s.possibilities[e]))return s.possibilities[e]!=s.want&&(r.value=a.scaleToFromZeroTo(r.value,s.possibilities[e],s.want)),r;throw new i.ColorParsingException(e)}static fromObject(e){if("r"in e)return{type:"rgba",value:[e.r,e.g,e.b,e.a]};if("l"in e)return{type:"hsla",value:[e.h,e.s,e.l,e.a]};if("v"in e)return{type:"hsva",value:[e.h,e.s,e.v,e.a]};if("c"in e)return{type:"cmyk",value:[e.c,e.m,e.y,e.k]};throw new i.ColorParsingException(JSON.stringify(e))}static isFromZeroToOne(e){for(let t in e)if(e[t]>1)return!1;return!0}static isFromZeroTo(e,t){if((Array.isArray(t)&&t!=a.ZERO_TO_ONE||!Array.isArray(t)&&1==t)&&a.isFromZeroToOne(e))return!1;for(let r in e)if(e[r]>(Array.isArray(t)?t[r]:t))return!1;return!0}static scaleToFromZeroToOne(e,t){if(a.isFromZeroToOne(e))return e;const r=[];for(let i in e)r.push(s.clamp01(e[i]/(Array.isArray(t)?t[i]:t)));return r}static scaleToFromZeroTo(e,t,r){const i=[];for(let n in e)i.push(s.clamp(0,Array.isArray(r)?r[n]:r,e[n]/(Array.isArray(t)?t[n]:t)*(Array.isArray(r)?r[n]:r)));return i}}a.CSS_INTEGER="[-\\+]?\\d+%?",a.CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",a.CSS_UNIT="(?:"+a.CSS_NUMBER+")|(?:"+a.CSS_INTEGER+")",a.PERMISSIVE_MATCH3="[\\s|\\(]+("+a.CSS_UNIT+")[,|\\s]+("+a.CSS_UNIT+")[,|\\s]+("+a.CSS_UNIT+")\\s*\\)?",a.PERMISSIVE_MATCH4="[\\s|\\(]+("+a.CSS_UNIT+")[,|\\s]+("+a.CSS_UNIT+")[,|\\s]+("+a.CSS_UNIT+")[,|\\s]+("+a.CSS_UNIT+")\\s*\\)?",a.ZERO_TO_ONE=[1,1,1,1],a.ZERO_TO_255=[255,255,255,1],a.MATCH_VALUES={rgb:{possibilities:[a.ZERO_TO_ONE,a.ZERO_TO_255],want:a.ZERO_TO_255},rgba:"rgb",cmyk:{possibilities:[[100,100,100,100],a.ZERO_TO_ONE],want:a.ZERO_TO_ONE},hsl:{possibilities:[[360,100,100,1],a.ZERO_TO_ONE],want:a.ZERO_TO_ONE},hsla:"hsl",hsv:"hsl",hsva:"hsl"},a.MATCHES=[{type:"rgb",regexp:new RegExp("rgb"+a.PERMISSIVE_MATCH3)},{type:"rgba",regexp:new RegExp("rgba"+a.PERMISSIVE_MATCH4)},{type:"hsl",regexp:new RegExp("hsl"+a.PERMISSIVE_MATCH3)},{type:"hsla",regexp:new RegExp("hsla"+a.PERMISSIVE_MATCH4)},{type:"hsv",regexp:new RegExp("hsv"+a.PERMISSIVE_MATCH3)},{type:"hsva",regexp:new RegExp("hsva"+a.PERMISSIVE_MATCH4)},{type:"cmyk",regexp:new RegExp("cmyk"+a.PERMISSIVE_MATCH4)},{type:"hex3",regexp:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/},{type:"hex6",regexp:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},{type:"hex4",regexp:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/},{type:"hex8",regexp:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Error{constructor(e,t){super(`Il colore '${e}' non è valido.\nI formati supportati sono: ${t.map(e=>e.type).join(", ")}`)}}t.ColorNotValidException=i;class n extends Error{constructor(e){super(`Impossibile convertire il colore '${e}'`)}}t.ColorParsingException=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{static rgbToHex(e){return`#${i.toHex(e.r)}${i.toHex(e.g)}${i.toHex(e.b)}`}static toHex(e){const t=e.toString(16);return 2==t.length?t:"0"+t}static hexToRgb(e){return e="string"==typeof e?e.match(/[a-zA-Z0-9]{2}/gi):e,{r:i.hexToDec(e[0]),g:i.hexToDec(e[1]),b:i.hexToDec(e[2])}}static hexToDec(e){return parseInt(i.fill2(e),16)}static fill2(e){return 1==e.length?e+e:e}static rgbToHsl(e){let t=e.r/255,r=e.g/255,i=e.b/255;const n=Math.max(t,r,i),s=Math.min(t,r,i);let a,o,c=(n+s)/2;if(n==s)a=o=0;else{const e=n-s;switch(o=c>.5?e/(2-n-s):e/(n+s),n){case t:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-t)/e+2;break;case i:a=(t-r)/e+4}a/=6}return{h:a,s:o,l:c}}static hslToRgb(e){let t,r,i,n=e.h,s=e.s,a=e.l;if(0==s)t=r=i=a;else{const e=(e,t,r)=>(r+=r<0?1:r>1?-1:0)<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e,o=a<.5?a*(1+s):a+s-a*s,c=2*a-o;t=e(c,o,n+1/3),r=e(c,o,n),i=e(c,o,n-1/3)}return{r:Math.round(255*t),g:Math.round(255*r),b:Math.round(255*i)}}static rgbToHsv(e){let t=e.r/255,r=e.g/255,i=e.b/255;const n=Math.max(t,r,i),s=Math.min(t,r,i);let a,o,c=n;const h=n-s;if(o=0==n?0:h/n,n==s)a=0;else{switch(n){case t:a=(r-i)/h+(r<i?6:0);break;case r:a=(i-t)/h+2;break;case i:a=(t-r)/h+4}a/=6}return{h:a,s:o,v:c}}static hsvToRgb(e){let t,r,i,n=e.h,s=e.s,a=e.v;const o=Math.floor(6*n),c=6*n-o,h=a*(1-s),l=a*(1-c*s),u=a*(1-(1-c)*s);switch(o%6){case 0:t=a,r=u,i=h;break;case 1:t=l,r=a,i=h;break;case 2:t=h,r=a,i=u;break;case 3:t=h,r=l,i=a;break;case 4:t=u,r=h,i=a;break;case 5:t=a,r=h,i=l}return{r:Math.round(255*t),g:Math.round(255*r),b:Math.round(255*i)}}static rgbToCmyk(e){let t=e.r/255,r=e.g/255,i=e.b/255,n={k:null,c:null,m:null,y:null};return n.k=+(1-Math.max.call(null,t,r,i)),n.c=+(1-t-n.k)/(1-n.k),n.m=+(1-r-n.k)/(1-n.k),n.y=+(1-i-n.k)/(1-n.k),n}static cmykToRgb(e){return{r:255*(1-e.c)*(1-e.k),g:255*(1-e.m)*(1-e.k),b:255*(1-e.y)*(1-e.k)}}}t.default=i},function(e,t,r){"use strict";var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16);function s(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"==typeof e&&a.test(e)},c=[],h=0;h<256;++h)c.push((h+256).toString(16).substr(1));var l,u,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r},f=0,d=0;t.a=function(e,t,r){var i=t&&r||0,n=t||new Array(16),a=(e=e||{}).node||l,o=void 0!==e.clockseq?e.clockseq:u;if(null==a||null==o){var c=e.random||(e.rng||s)();null==a&&(a=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==o&&(o=u=16383&(c[6]<<8|c[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:d+1,m=h-f+(g-d)/1e4;if(m<0&&void 0===e.clockseq&&(o=o+1&16383),(m<0||h>f)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=h,d=g,u=o;var b=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;n[i++]=b>>>24&255,n[i++]=b>>>16&255,n[i++]=b>>>8&255,n[i++]=255&b;var _=h/4294967296*1e4&268435455;n[i++]=_>>>8&255,n[i++]=255&_,n[i++]=_>>>24&15|16,n[i++]=_>>>16&255,n[i++]=o>>>8|128,n[i++]=255&o;for(var v=0;v<6;++v)n[i+v]=a[v];return t||p(n)}}])}));